<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Add New Item</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="openHelp()">
        <ion-icon name="help-circle"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Add New Item</ion-title>
    </ion-toolbar>
  </ion-header>

  <form #itemForm="ngForm" (ngSubmit)="addItem()">
    <ion-list>
      <ion-item>
        <ion-label position="floating">Item Name*</ion-label>
        <ion-input 
          [(ngModel)]="newItem.item_name" 
          name="itemName" 
          required
          type="text"
          placeholder="Enter item name"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Category*</ion-label>
        <ion-select 
          [(ngModel)]="newItem.category" 
          name="category" 
          required
          interface="action-sheet"
        >
          <ion-select-option *ngFor="let cat of categories" [value]="cat">
            {{ cat }}
          </ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Quantity*</ion-label>
        <ion-input 
          [(ngModel)]="newItem.quantity" 
          name="quantity" 
          required
          type="number"
          min="0"
          placeholder="0"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Price*</ion-label>
        <ion-input 
          [(ngModel)]="newItem.price" 
          name="price" 
          required
          type="number"
          min="0"
          step="0.01"
          placeholder="0.00"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Supplier Name*</ion-label>
        <div style="height: 4px;"></div>
        <ion-input 
          [(ngModel)]="newItem.supplier_name" 
          name="supplierName" 
          required
          type="text"
          placeholder="Enter supplier name"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-label position="floating">Stock Status*</ion-label>
        <ion-select 
          [(ngModel)]="newItem.stock_status" 
          name="stockStatus" 
          required
          interface="action-sheet"
        >
          <ion-select-option *ngFor="let status of stockStatuses" [value]="status">
            {{ status }}
          </ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label>Featured Item</ion-label>
        <ion-toggle 
          [(ngModel)]="newItem.featured_item" 
          [ngModelOptions]="{standalone: true}"
          aria-label="Featured item toggle"
        ></ion-toggle>
      </ion-item>

      <ion-item>
        <ion-label position="stacked">Special Note</ion-label>
        <ion-textarea 
          [(ngModel)]="newItem.special_note" 
          name="specialNote"
          placeholder="Optional notes about this item"
          autoGrow
          rows="3"
        ></ion-textarea>
      </ion-item>
    </ion-list>

    <ion-button 
      expand="block" 
      type="submit" 
      [disabled]="!itemForm.valid"
      class="ion-margin"
    >
      Add Item
    </ion-button>
  </form>

  <ion-card *ngIf="featuredItems.length > 0" class="featured-card">
    <ion-card-header>
      <ion-card-title>Featured Items</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list lines="none">
        <ion-item *ngFor="let item of featuredItems" detail="false">
          <ion-avatar slot="start">
            <ion-icon name="star" color="warning"></ion-icon>
          </ion-avatar>
          <ion-label>
            <h3>{{ item.item_name }}</h3>
            <p>{{ item.category }} â€¢ {{ item.quantity }} in stock</p>
          </ion-label>
          <ion-badge slot="end" color="warning">
            ${{ item.price | number:'1.2-2' }}
          </ion-badge>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>
</ion-content>