<ion-header>
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-button (click)="navCtrl.back()">
          <ion-icon name="arrow-back"></ion-icon>
        </ion-button>
      </ion-buttons>
      <ion-title>Edit Item</ion-title>
      <ion-buttons slot="end">
        <ion-button (click)="confirmDelete()" 
                   [disabled]="isDeleteDisabled"
                   color="danger">
          <ion-icon name="trash"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>
  
  <ion-content>
    <form #itemForm="ngForm" (ngSubmit)="updateItem()">
      <ion-list>
        <ion-item>
          <ion-label>Item ID</ion-label>
          <ion-label>{{item.item_id}}</ion-label>
        </ion-item>
  
        <ion-item>
          <ion-label position="floating">Item Name*</ion-label>
          <ion-input [(ngModel)]="item.item_name" name="item_name" required></ion-input>
        </ion-item>
  
        <ion-item>
          <ion-label position="floating">Category*</ion-label>
          <ion-select [(ngModel)]="item.category" name="category" required>
            <ion-select-option *ngFor="let cat of categories" [value]="cat">{{cat}}</ion-select-option>
          </ion-select>
        </ion-item>
  
        <ion-item>
          <ion-label position="floating">Quantity*</ion-label>
          <ion-input type="number" [(ngModel)]="item.quantity" name="quantity" required min="0"></ion-input>
        </ion-item>
  
        <ion-item>
          <ion-label position="floating">Price*</ion-label>
          <ion-input type="number" [(ngModel)]="item.price" name="price" required min="0" step="0.01"></ion-input>
        </ion-item>
  
        <ion-item>
          <ion-label position="floating">Supplier Name*</ion-label>
          <div style="height: 8px;"></div>
          <ion-input [(ngModel)]="item.supplier_name" name="supplier_name" required></ion-input>
        </ion-item>
  
        <ion-item>
          <ion-label position="floating">Stock Status*</ion-label>
          <ion-select [(ngModel)]="item.stock_status" name="stock_status" required>
            <ion-select-option *ngFor="let status of stockStatuses" [value]="status">{{status}}</ion-select-option>
          </ion-select>
        </ion-item>
  
        <ion-item>
          <ion-label>Featured Item</ion-label>
          <ion-toggle [(ngModel)]="item.featured_item" [ngModelOptions]="{standalone: true}"></ion-toggle>
        </ion-item>
  
        <ion-item>
          <ion-label position="floating">Special Note</ion-label>
          <div style="height: 16px;"></div>
          <ion-textarea [(ngModel)]="item.special_note" name="special_note" autoGrow rows="3"></ion-textarea>
        </ion-item>
      </ion-list>
  
      <ion-button expand="block" type="submit" [disabled]="!itemForm.valid" class="ion-margin">
        Update Item
      </ion-button>
    </form>
  
    <ion-alert
      [isOpen]="showDeleteAlert"
      header="Confirm Delete"
      [message]="'Are you sure you want to delete ' + item.item_name + '?'"
      [buttons]="alertButtons"
      (didDismiss)="showDeleteAlert = false">
    </ion-alert>
  </ion-content>